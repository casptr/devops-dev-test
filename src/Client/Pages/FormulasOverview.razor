@page "/formules"


@if (formulas is null)
{
    <p>Loading...</p>
}
else
{
    <MudBreakpointProvider>
        <MudHidden Breakpoint="Breakpoint.SmAndDown" Invert="true">

            @if (formulas != null)
            {
                 @foreach (var f in formulas)
                {
                    <MudSimpleTable Style="overflow-x: auto;" Bordered="true" Class="mx-2 my-6">
                        <tbody>
                            <tr>
                                <td>
                                    <h3 class="FormulaTextSmall">Formule</h3>
                                </td>
                                <td class="formulas">
                                    <h3 class="formulaNameSmall">@f.Title</h3>
                                    <p>@f.Description</p>
                                    <MudImage Src="@f.ImageUrl.ToString()" Style="width: 70%; height: auto;" Alt="@f.Title" Class="rounded-lg ma-4" />
                                </td>
                            </tr>
                           @if (supplements != null && names != null)
                            {
                                @foreach (var s in names)
                                {
                                    <tr>
                                        <td><b>@s</b></td>
                                        @if (f.IncludedSupplements != null)
                                        {
                                            @if (f.IncludedSupplements.Contains(s))
                                            {
                                                <td class="supplements">
                                                    <MudIcon Icon="@Icons.Material.Filled.CheckCircle" Color="Color.Primary" />
                                                </td>
                                            }
                                            else
                                            {
                                                <td></td>
                                            }
                                        }
                                    </tr>
                                }
                            }
                        </tbody>
                    </MudSimpleTable>
                }
            }
        </MudHidden>
    <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="true">
    <MudSimpleTable Style="overflow-x: auto;" Bordered="true" Class="ma-8">
        <tbody>
            <tr>
                <td>
                    <h3 class="compareFormulas">Vergelijk formules</h3>
                    <p>Kies de formule die het best past bij jouw wensen.</p>
                </td>

                @foreach (var f in formulas)
                {
                        <td class="formulas">
                            <h3 class="formulaName">@f.Title</h3>
                            <p>
                                @f.Description
                            </p>
                            <MudImage Src="@f.ImageUrl.ToString()" Width="200" Height="150" Alt="@f.Title" Class="rounded-lg ma-4" />
                        </td>
                }

            </tr>
            @if (supplements != null)
            {
                @foreach (var supplementName in supplements.Select(s => s.Name).ToHashSet())
                {
                    <tr>
                        <td><b>@supplementName</b></td>

                        @foreach (var f in formulas)
                        {
                            <td class="supplements">

                                @if (f.IncludedSupplements?.Contains(supplementName) ?? false)
                                {
                                    <MudIcon Icon="@Icons.Material.Filled.CheckCircle" Color="Color.Primary" />
                                }

                            </td>
                        }

                    </tr>
                }
            }

        </tbody>
    </MudSimpleTable>
    </MudHidden>
</MudBreakpointProvider>
}

                                     