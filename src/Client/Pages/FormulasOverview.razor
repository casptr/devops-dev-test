@page "/formules"
@inject HttpClient http

<MudSimpleTable Style="overflow-x: auto;" Bordered="true" Class="ma-8">
   
    <tbody>
        <tr>
            <td>
                <h3 class="compareFormulas">Vergelijk formules</h3>
                <p>Kies de formule die het best past bij jouw wensen.</p>
            </td>
            @if (formulas != null)
            {
                @foreach (var f in formulas)
                {
                     <td class="formulas">
                        <h3 class="formulaName">@f.Name</h3>
                        <p>
                            @f.Description
                        </p>

                        <MudImage Src="@f.ImageUrl" Width="200" Height="150" Alt="@f.Name" Elevation="25" Class="rounded-lg ma-4" />
                        
                       
                    </td>
                }
            }
           
        </tr>
        @if (supplements!=null)
        {
            @foreach (var s in supplements)
            {
                <tr>
                            <td><b>@s.Name</b></td>
                    @if (formulas != null)
                    {
                        @foreach (var f in formulas)
                        {
                            @if (f.IncludedSupplements != null)
                            {
                                @if (f.IncludedSupplements.Contains(s))
                                {
                                    <td class="supplements">
                                        <MudIcon Icon="@Icons.Material.Filled.CheckCircle" Color="Color.Primary"  />
                                    </td>
                                }
                                else
                                {
                                    <td></td>
                                }
                            }
                            
                        }
                    }
                   
                   
                </tr>
            }
        }
      
    </tbody>
</MudSimpleTable>

@code {
    private Formula[]? formulas;
    private Supplement[]? supplements;
    protected override async Task OnInitializedAsync()
    {
        formulas = await http.GetFromJsonAsync<Formula[]>
        (
            "Sample-data/FormulaData.json"                          
        );
        supplements = await http.GetFromJsonAsync<Supplement[]>
       (
           "Sample-data/SupplementData.json"
       );
    }

    public class Formula
    {
        public string Name { get; set; }
        public string Description { get; set; }
        public decimal Price { get; set; }
        public string? ImageUrl { get; set; }
        public IEnumerable<Supplement>? IncludedSupplements  { get; set; }
    }

    public class Supplement
    {
        public string Name { get; set; }

        public override bool Equals(object obj)
        {
            return Name.ToString() == obj.ToString();
        }
        public override string ToString()
        {
            return Name.ToString();
        }
    }
}




